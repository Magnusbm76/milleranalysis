<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Color Switch Debug Test</title>
    
    <!-- Google Fonts Integration -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'serif': ['var(--font-serif)'],
                        'sans': ['var(--font-sans)'],
                    },
                    colors: {
                        'oxford-blue': 'var(--color-oxford-blue)',
                        'cream': 'var(--color-cream)',
                        'charcoal': 'var(--color-charcoal)',
                        'gold': 'var(--color-gold)',
                    },
                }
            }
        }
    </script>
    
    <style>
        /* Test-specific styles */
        .test-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .debug-panel {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .debug-panel h3 {
            margin-top: 0;
            color: #FFD700;
        }
        
        .debug-panel div {
            margin: 5px 0;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-pass { background-color: #28a745; }
        .status-fail { background-color: #dc3545; }
        .status-pending { background-color: #ffc107; }
        
        .test-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }
        
        .test-button {
            background: var(--color-gold);
            color: var(--color-oxford-blue);
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
            display: block;
        }
        
        .test-button:hover {
            background: #FFC700;
        }
        
        .nav-status {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>

<body class="font-serif bg-cream">
    <!-- Debug Console -->
    <div class="debug-panel" id="debugConsole">
        <h3>Debug Console</h3>
        <div id="debugLog"></div>
    </div>
    
    <!-- Test Controls -->
    <div class="test-controls">
        <button class="test-button" onclick="scrollToSection('hero')">Hero</button>
        <button class="test-button" onclick="scrollToSection('books')">Books</button>
        <button class="test-button" onclick="scrollToSection('insights')">Insights</button>
        <button class="test-button" onclick="scrollToSection('about')">About</button>
        <button class="test-button" onclick="scrollToSection('key-concepts')">Key Concepts</button>
        <button class="test-button" onclick="scrollToSection('faq')">FAQ</button>
        <button class="test-button" onclick="scrollToSection('contact')">Contact</button>
        <button class="test-button" onclick="runRapidScrollTest()">Rapid Scroll</button>
        <button class="test-button" onclick="clearDebugLog()">Clear Log</button>
    </div>
    
    <!-- Navigation Status -->
    <div class="nav-status">
        <div>Nav Dark Mode: <span id="navDarkMode">unknown</span></div>
        <div>Current Section: <span id="currentSection">unknown</span></div>
        <div>Scroll Position: <span id="scrollPos">0</span>px</div>
    </div>

    <!-- Navigation (copied from main site) -->
    <header class="fixed top-0 left-0 w-full p-6 z-50" role="banner">
        <nav class="flex justify-between items-center max-w-7xl mx-auto" role="navigation" aria-label="Main navigation">
            <div class="text-xl font-bold tracking-widest text-oxford-blue uppercase">
                JOHN F. MILLER
            </div>

            <ul class="flex space-x-8">
                <li><a href="#books" class="nav-link">Books</a></li>
                <li><a href="#insights" class="nav-link">Insights</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#key-concepts" class="nav-link">Key Concepts</a></li>
                <li><a href="#faq" class="nav-link">FAQ</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Test Sections -->
    <main id="main-content" class="relative z-10 pt-24">
        <!-- Hero Video Section (Dark Background) -->
        <section id="hero" class="hero-video-container">
            <div class="test-section">
                <h1 class="text-6xl text-cream font-bold text-center">Hero Video Section</h1>
                <p class="text-cream text-xl">Dark background - Navigation should be cream</p>
                <div class="bg-oxford-blue p-4 rounded">
                    <p class="text-cream">This section has hero-video-container class</p>
                </div>
            </div>
        </section>

        <!-- Books Section (Light Background) -->
        <section id="books" class="test-section bg-cream">
            <h1 class="text-6xl text-oxford-blue font-bold text-center">Books Section</h1>
            <p class="text-charcoal text-xl">Light background - Navigation should be Oxford Blue</p>
            <div class="bg-cream p-4 rounded border border-oxford-blue">
                <p class="text-charcoal">This section has bg-cream class</p>
            </div>
        </section>

        <!-- Insights Section (Dark Background) -->
        <section id="insights" class="test-section bg-oxford-blue">
            <h1 class="text-6xl text-cream font-bold text-center">Insights Section</h1>
            <p class="text-cream text-xl">Dark background - Navigation should be cream</p>
            <div class="bg-oxford-blue p-4 rounded">
                <p class="text-cream">This section has bg-oxford-blue class</p>
            </div>
        </section>

        <!-- About Section (Light Background) -->
        <section id="about" class="test-section bg-cream">
            <h1 class="text-6xl text-oxford-blue font-bold text-center">About Section</h1>
            <p class="text-charcoal text-xl">Light background - Navigation should be Oxford Blue</p>
            <div class="bg-cream p-4 rounded border border-oxford-blue">
                <p class="text-charcoal">This section has bg-cream class</p>
            </div>
        </section>

        <!-- Key Concepts Section (Light Background) -->
        <section id="key-concepts" class="test-section bg-cream">
            <h1 class="text-6xl text-oxford-blue font-bold text-center">Key Concepts Section</h1>
            <p class="text-charcoal text-xl">Light background - Navigation should be Oxford Blue</p>
            <div class="bg-cream p-4 rounded border border-oxford-blue">
                <p class="text-charcoal">This section has bg-cream class</p>
            </div>
        </section>

        <!-- FAQ Section (Dark Background) -->
        <section id="faq" class="test-section bg-oxford-blue">
            <h1 class="text-6xl text-cream font-bold text-center">FAQ Section</h1>
            <p class="text-cream text-xl">Dark background - Navigation should be cream</p>
            <div class="bg-oxford-blue p-4 rounded">
                <p class="text-cream">This section has bg-oxford-blue class</p>
            </div>
        </section>

        <!-- Contact Section (Dark Background) -->
        <section id="contact" class="test-section bg-oxford-blue">
            <h1 class="text-6xl text-cream font-bold text-center">Contact Section</h1>
            <p class="text-cream text-xl">Dark background - Navigation should be cream</p>
            <div class="bg-oxford-blue p-4 rounded">
                <p class="text-cream">This section has bg-oxford-blue class</p>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script src="debug_navigation.js"></script>
    
    <script>
        // Debug logging
        const debugLog = document.getElementById('debugLog');
        const originalConsole = {
            log: console.log,
            warn: console.warn,
            error: console.error
        };
        
        function addToDebugLog(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.innerHTML = `<span style="color: #ccc">[${timestamp}]</span> ${message}`;
            
            if (type === 'error') {
                entry.style.color = '#ff6b6b';
            } else if (type === 'warn') {
                entry.style.color = '#ffd93d';
            }
            
            debugLog.appendChild(entry);
            debugLog.scrollTop = debugLog.scrollHeight;
            
            // Keep only last 50 entries
            while (debugLog.children.length > 50) {
                debugLog.removeChild(debugLog.firstChild);
            }
        }
        
        // Override console methods
        console.log = function(...args) {
            originalConsole.log(...args);
            addToDebugLog(args.join(' '), 'log');
        };
        
        console.warn = function(...args) {
            originalConsole.warn(...args);
            addToDebugLog(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalConsole.error(...args);
            addToDebugLog(args.join(' '), 'error');
        };
        
        // Update status display
        function updateStatusDisplay() {
            const nav = document.querySelector('nav');
            const hasDarkMode = nav.classList.contains('nav-dark-mode');
            
            document.getElementById('navDarkMode').textContent = hasDarkMode ? 'YES' : 'NO';
            document.getElementById('navDarkMode').style.color = hasDarkMode ? '#28a745' : '#dc3545';
            
            // Update current section
            const sections = document.querySelectorAll('section');
            let currentSection = 'unknown';
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
                    currentSection = section.id;
                }
            });
            
            document.getElementById('currentSection').textContent = currentSection;
            document.getElementById('scrollPos').textContent = Math.round(window.scrollY);
        }
        
        // Test functions
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
                console.log(`ðŸŽ¯ Manually scrolled to section: ${sectionId}`);
            }
        }
        
        function runRapidScrollTest() {
            console.log('ðŸš€ Starting rapid scroll test...');
            const sections = document.querySelectorAll('section');
            let index = 0;
            
            const scrollInterval = setInterval(() => {
                if (index < sections.length) {
                    sections[index].scrollIntoView({ behavior: 'auto' });
                    console.log(`ðŸš€ Rapid scroll to section: ${sections[index].id}`);
                    index++;
                } else {
                    clearInterval(scrollInterval);
                    console.log('ðŸš€ Rapid scroll test completed');
                }
            }, 100);
        }
        
        function clearDebugLog() {
            debugLog.innerHTML = '';
            console.log('ðŸ§¹ Debug log cleared');
        }
        
        // Initialize status monitoring
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸ”§ Debug test page loaded');
            
            // Update status display every 100ms
            setInterval(updateStatusDisplay, 100);
            
            // Initial status update
            setTimeout(updateStatusDisplay, 500);
        });
        
        // Monitor scroll events
        window.addEventListener('scroll', () => {
            updateStatusDisplay();
        });
    </script>
</body>
</html>